<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title>Construct</title>
    <!-- Meta -->
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <!-- All Css -->
    <link rel="stylesheet" type="text/css" href="address/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="address/css/et-fonts.css">
    <link rel="stylesheet" type="text/css" href="address/css/font-awesome.min.css">
    <!-- Slider -->
    <link rel="stylesheet" type="text/css" href="address/css/settings.css">
    <link rel="stylesheet" type="text/css" href="address/css/static-captions.css">
    <link rel="stylesheet" type="text/css" href="address/css/dynamic-captions.css">
    <link rel="stylesheet" type="text/css" href="address/css/preset1.css">
    <link rel="stylesheet" type="text/css" href="address/css/owl.carousel.css">
    <link rel="stylesheet" type="text/css" href="address/css/owl.theme.css">
    <!-- portfolios -->
    <link rel="stylesheet" type="text/css" href="address/css/featherlight.min.css">
    <link rel="stylesheet" type="text/css" href="address/css/spsimpleportfolio.css">
    <link rel="stylesheet" type="text/css" href="address/css/style.css">
</head>
<style>
    #infoModal .modal-header .close{
        margin-top: -10px;
        line-height: 0;
    }
    #infoModal .modal-body {
        max-height: 70vh;
        overflow: hidden;
        overflow-y: scroll;
    }
    #locationField {
        padding-top: 20px;
    }
    #dynamic-list {
        padding-top: 3px;
    }
    #autocomplete {
        width:100%;
    }
    #dynamic-list li {
        margin-bottom: 3px;
        margin-top:3px;
    }
    #dynamic-list button {
        float: right;
        height: 20px;
        width: 20px;
        line-height: 0px;
        text-align: center;
    }
    #dynamic-list button.infobtn{
        margin-right: 10px;
        width: 60px;
        color: black;
    }
</style>
<body class="inner">
<p>&nbsp;</p>
<!--Top Bar-->
<section id="topbar">
<div class="container">
<div class="row">
<div class="col-sm-12 topbar-base no-padding"><!--Top Bar Block-->
<div class="col-sm-8 col-md-6 topbar-block left text-left">
<ul>
<li>Mon - Sat: 09.00 - 19.00</li>
<li><a href="tel:+789675978">+(789) 675 978</a></li>
<li><a href="mailto:support@industry.com">support@industry.com</a></li>
</ul>
</div>
<!--Top Bar block-->
<div class="col-sm-4 col-md-4 col-md-offset-2 topbar-block text-right">&nbsp;</div>
</div>
</div>
</div>
</section>
<!-- header--><header><nav id="slide-nav" class="navbar" data-offset-top="60" data-spy="affix">
<div class="container">
<div class="row"><!--Brand and toggle get grouped for better mobile display-->
<div class="navbar-header"><button class="navbar-toggle" type="button"> <span class="sr-only">Toggle navigation</span> </button> <a href="index.html"><img src="images/logo-2.png" alt="Site logo" /></a></div>
<!-- Collect the nav links, forms, and other content for toggling -->
<div id="menu_nav" class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li><a href="index.html">Home</a></li>
<li><a class="active" href="about.html">about us</a></li>
<li class="dropdown"><a href="services.html">services</a>
<ul class="dropdown-menu">
<li><a href="construction.html">Construction</a></li>
<li><a href="architecture.html">Architecture</a></li>
<li><a href="consullting.html">Consulting</a></li>
<li><a href="metal-roofing.html">Metal Roofing</a></li>
<li><a href="painting.html">Painting</a></li>
<li><a href="electrical.html">Electrical</a></li>
</ul>
</li>
<li class="dropdown"><a href="#">pages</a>
<ul class="dropdown-menu">
<li><a href="under-construction.html">Coming soon</a></li>
<li><a href="404.html">4o4 page</a></li>
</ul>
</li>
<li><a href="projects.html">projects</a></li>
<li class="dropdown"><a href="blog.html">blog</a>
<ul class="dropdown-menu">
<li><a href="blog-w-l-s.html">Blog with left sidebar</a></li>
<li><a href="blog-w-r-s.html">Blog with right sidebar</a></li>
</ul>
</li>
<li><a href="contact.html">Contact</a></li>
<li class="dropdown">
<ul class="dropdown-menu">
<li><form class="navbar-form" action="#" method="post">
<div class="form-group"><input class="form-control" name="search" type="text" placeholder="Search..." /></div>
<button class="btn" type="submit"></button></form></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<!--
         /.navbar-collapse
         --></nav></header><!-- header end-->
<p>&nbsp;</p>
<!-- Bread crumb-->
<section id="breadcrumb">
<div class="container">
<div class="row">
<div class="col-sm-12 breadcrumb-base no-padding">
<div class="col-sm-8 col-xs-4 page-heading">
<h4>About Us</h4>
</div>
<div class="col-sm-4 col-xs-8 breadcrumb-block text-right"><ol class="breadcrumb">
<li>You are here: <a href="index.html">Home</a></li>
<li class="active">About us</li>
</ol></div>
</div>
</div>
</div>
</section>
<!-- Bread crumb end-->
<p>&nbsp;</p>
<!--Services-->
<section id="service">
<div class="container">
<div class="row">
<div class="row-sm-12"><!-- Modal -->
<div id="infoModal" class="modal fade" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 id="exampleModalLabel" class="modal-title">Full Info</h5>
<button class="close" type="button" data-dismiss="modal"> &times; </button></div>
<div id="info" class="modal-body">&nbsp;</div>
</div>
</div>
</div>
<div id="locationField"><input id="autocomplete" type="text" placeholder="Enter your address" />
<ul id="dynamic-list"></ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12 service-base space">
<div class="col-sm-6 service-block">
<div class="service-inner"><img src="images/demo-1.png" alt="About" />
<div class="service-text">
<h4>ABOUT OUR COMPANY</h4>
<p>Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Maecenas venenatis sollicitudin neque, ve Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Maecenas venenatis sollicitudin neque,</p>
<a href="#">read more</a></div>
</div>
</div>
<div class="col-sm-6 service-block">
<div class="service-inner"><img src="images/demo-2.png" alt="About" />
<div class="service-text">
<h4>ABOUT OUR WORK</h4>
<p>Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Maecenas venenatis sollicitudin neque, ve Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Maecenas venenatis sollicitudin neque,</p>
<a href="#">read more</a></div>
</div>
</div>
</div>
</div>
</div>
</section>
<!--Services end-->
<p>&nbsp;</p>
<!-- footer--><footer>
<div class="container">
<div class="row">
<div class="col-sm-12 no-padding copy-right text-center">
<p>Copyright &copy; 2015 Construct. All Rights Reserved. Designed By Themecanyon</p>
</div>
</div>
</div>
</footer><!--Scripts-->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>
<script src="address/js/bootstrap.js" type="text/javascript"></script>
<script src="address/js/jquery.matchHeight-min.js" type="text/javascript"></script>
<script src="address/js/appear.js" type="text/javascript"></script>
<script src="address/js/featherlight.min.js" type="text/javascript"></script>
<script src="address/js/jquery.shuffle.modernizr.min.js" type="text/javascript"></script>
<script src="address/js/spsimpleportfolio.js" type="text/javascript"></script>
<script src="address/js/owl.carousel.js" type="text/javascript"></script>
<script src="address/js/rev-tool.js" type="text/javascript"></script>
<script src="address/js/revolation.js" type="text/javascript"></script>
<script src="address/js/count-down.js" type="text/javascript"></script>
<script src="address/js/parallex.js" type="text/javascript"></script>
<script src="address/js/custom.js" type="text/javascript"></script>
<script>// <![CDATA[
var placeSearch, autocomplete;

    function initAutocomplete() {
        autocomplete = new google.maps.places.Autocomplete(
        document.getElementById('autocomplete'), {types: ['geocode']});
        autocomplete.setFields(["formatted_address","address_component"]);
        autocomplete.addListener('place_changed', fillInAddress);
        }
        
    function fillInAddress() {
        var place = autocomplete.getPlace();
        console.log(place);
        savePlaceToDB(place);
    }
    function showZillowData(place) {
        var url = "/api.php";
        var data = JSON.stringify(
        {
            "action": "getzpid",
            "locality":place.address.split(',')[0],
            "state":place.locality + ", " + place.state
        });
        
        sendRequest(data,url,null);
    }
    function getZillowData(zpid) {
        if(zpid) {
            var url = "/api.php";
            var data = JSON.stringify(
            {
                "action": "getzpdata",
                "zpid":zpid
            });
            
            sendRequest(data,url,null);
        } else {
            fillAndShow("No Data Available");
        }
        
    }
    function getAllPlaces() {
        var url = "/api.php";
        var data = JSON.stringify(
        {
            "action": "getall"
        });
        sendRequest(data,url,null);
    }
    function savePlaceToDB(place){
        var url = "/api.php";
        var locality = "";
        var state = "";

        for (var i = 0; i < place.address_components.length; i++) {
            for (var j = 0; j < place.address_components[i].types.length; j++) {
                if (place.address_components[i].types[j] == "locality") {
                    locality = place.address_components[i].long_name;
                }
                if (place.address_components[i].types[j] == "administrative_area_level_1") {
                    state = place.address_components[i].short_name;
                }
            }
        }
        var data = JSON.stringify(
        {
            "action": "save",
            "address":place.formatted_address,
            "locality":locality,
            "state":state
        });
        sendRequest(data,url,null);
    }
    function deletePlaceFromDB(id){
        var url = "/api.php";
        var data = JSON.stringify(
        {
            "action": "delete",
            "id":id
        });
        sendRequest(data,url,null);
    }
    function addNewToList(id, address, locality, state) {
        console.log(address);
        var place = {
            "id":id,
            "address":address,
            "locality":locality,
            "state":state
        }
        console.log("Adding: ", place);
        addItem(place);
    }
    function fillAndShow(data){
        // var div = document.getElementById("info");
        // div.innerHTML = "";
        // div.appendChild(document.createTextNode(data));
        // jQuery('#infoModal').modal();
        
        var win = window.open("", "Data", "toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=780,height=200");
        var div = win.document.createElement("div");
        div.appendChild(win.document.createTextNode(data));
        win.document.body.appendChild(div);
    }
    function addItem(place){
        var ul = document.getElementById("dynamic-list");
        
        var li = document.createElement("li");
        li.setAttribute('id',place.id);
        li.appendChild(document.createTextNode(place.address));

        var btn = document.createElement("button");
        btn.onclick = function() { removeItem(place.id); }
        btn.appendChild(document.createTextNode('x'));
        li.appendChild(btn);

        var btn2 = document.createElement("button");
        btn2.onclick = function() { 
            showZillowData(place);
        }
        btn2.appendChild(document.createTextNode('info'));
        btn2.className = "infobtn";
        li.appendChild(btn2);

        ul.appendChild(li);
    }

    function removeItem(id){
        var ul = document.getElementById("dynamic-list");
        var item = document.getElementById(id);
        ul.removeChild(item);
        deletePlaceFromDB(id);
    }
    function generateList(i_places) {
        var places = JSON.parse(i_places);
        for(var i = 0; i < places.length; i++){
            addItem(places[i]);
        }
    }
    function sendRequest(data,url,type){
        var dataToSend = JSON.parse(data);
        var xhr = new XMLHttpRequest();
        type = (type) ? type : "application/json";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", type);
        xhr.withCredentials = true
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4 && xhr.status === 200) {
                console.log(xhr.responseText);
                switch(dataToSend.action) {
                    case "save":
                        console.log("Data was saved");
                        addNewToList(xhr.responseText, dataToSend.address, dataToSend.locality, dataToSend.state);
                        break;
                    case "getall":
                        console.log("All location are here");
                        generateList(xhr.responseText);
                        break;
                    case "delete":
                        console.log("Location was deleted");
                        break;
                    case "getzpid":
                        console.log(xhr.responseText);
                        getZillowData(xhr.responseText);
                        break;
                    case "getzpdata":
                        fillAndShow(xhr.responseText);
                        console.log(xhr.responseText);
                        break;
                    default:
                        break;
                }
            }
        };
        
        xhr.send(data);
    }

    getAllPlaces();
// ]]></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA-9QLyaP8o2jyCF-X-soc2J5EjVdCDcLw&amp;libraries=places&amp;callback=initAutocomplete" async="" defer="defer"></script>
</body>
AIzaSyA-9QLyaP8o2jyCF-X-soc2J5EjVdCDcLw
</html>